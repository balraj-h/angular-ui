language: javascript
node_js:
  - "14"
env:
  - NODE_ENV=ci
dist: dist
services:
  - docker
cache:
  directories:
    - node_modules
    - client/node_modules
install:
  - npm ci
script:
  - npm run build
  - npm run test
  - docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD
  - docker build -t balrajhanmanthugari/angular-ui:v1 .
  - docker push balrajhanmanthugari/angular-ui:v1
